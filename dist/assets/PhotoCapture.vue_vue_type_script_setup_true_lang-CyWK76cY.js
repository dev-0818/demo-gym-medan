import{d as j,J as B,K as _,o as r,c as s,a as e,g as m,F as z,t as k,e as A,h as n}from"./index-BL-rMMGy.js";const P={class:"flex flex-col items-center gap-3"},F={key:0,class:"w-full max-w-sm space-y-3"},H={class:"relative overflow-hidden rounded-xl bg-black"},L={class:"relative group"},R={key:0,class:"relative"},U=["src"],D={key:1,class:"flex h-28 w-28 flex-col items-center justify-center rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700/50"},N={class:"flex items-center gap-3"},T={class:"inline-flex cursor-pointer items-center gap-1.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},E={key:2,class:"text-xs text-red-500"},J=j({__name:"PhotoCapture",props:{modelValue:{}},emits:["update:modelValue"],setup(i,{emit:w}){const x=i,v=w,d=n(!1),o=n(null),p=n(null),u=n(null),g=n("");function y(a){const t=a.target;if(t.files&&t.files[0]){const l=t.files[0];if(l.size>2*1024*1024){alert("Ukuran foto maksimal 2MB");return}const c=new FileReader;c.onload=V=>{var f;v("update:modelValue",(f=V.target)==null?void 0:f.result)},c.readAsDataURL(l)}t.value=""}async function b(){g.value="",d.value=!0;try{const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}},audio:!1});u.value=a,await new Promise(t=>setTimeout(t,100)),o.value&&(o.value.srcObject=a,o.value.play())}catch{g.value="Tidak dapat mengakses kamera. Pastikan izin kamera sudah diberikan.",d.value=!1}}function C(){if(!o.value||!p.value)return;const a=o.value,t=p.value;t.width=a.videoWidth,t.height=a.videoHeight;const l=t.getContext("2d");if(!l)return;l.drawImage(a,0,0);const c=t.toDataURL("image/jpeg",.85);v("update:modelValue",c),h()}function h(){u.value&&(u.value.getTracks().forEach(a=>a.stop()),u.value=null),d.value=!1}function M(){v("update:modelValue","")}return B(()=>x.modelValue,()=>{}),_(()=>{h()}),(a,t)=>(r(),s("div",P,[d.value?(r(),s("div",F,[e("div",H,[e("video",{ref_key:"videoRef",ref:o,autoplay:"",playsinline:"",muted:"",class:"w-full rounded-xl",style:{transform:"scaleX(-1)"}},null,512),e("canvas",{ref_key:"canvasRef",ref:p,class:"hidden"},null,512)]),e("div",{class:"flex justify-center gap-3"},[e("button",{type:"button",onClick:C,class:"inline-flex items-center gap-2 rounded-lg bg-primary-600 px-4 py-2 text-sm font-medium text-white hover:bg-primary-700 transition-colors shadow-lg"},[...t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),m(" Ambil Foto ",-1)])]),e("button",{type:"button",onClick:h,class:"inline-flex items-center gap-2 rounded-lg bg-gray-200 dark:bg-gray-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"},[...t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),m(" Batal ",-1)])])])])):(r(),s(z,{key:1},[e("div",L,[i.modelValue?(r(),s("div",R,[e("img",{src:i.modelValue,alt:"Preview",class:"h-28 w-28 rounded-full object-cover ring-4 ring-primary-100 dark:ring-primary-900/30"},null,8,U),e("button",{type:"button",onClick:M,class:"absolute -top-1 -right-1 rounded-full bg-red-500 p-1 text-white shadow-lg hover:bg-red-600 transition-colors"},[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):(r(),s("div",D,[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),e("span",{class:"mt-1 text-[10px] font-medium text-gray-500 dark:text-gray-400"},"Foto",-1)])]))]),e("div",N,[e("label",T,[t[4]||(t[4]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),m(" "+k(i.modelValue?"Ganti":"Upload")+" Foto ",1),e("input",{type:"file",accept:"image/*",class:"hidden",onChange:y},null,32)]),e("button",{type:"button",onClick:b,class:"inline-flex items-center gap-1.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-1.5 text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[...t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),m(" Ambil dari Kamera ",-1)])])]),t[6]||(t[6]=e("p",{class:"text-[11px] text-gray-400"},"JPG, PNG max 2MB",-1))],64)),g.value?(r(),s("p",E,k(g.value),1)):A("",!0)]))}});export{J as _};
