import{d as U,s as I,c as o,a as t,t as i,x as n,e as b,f as p,v as h,H as _,b as R,F as M,l as C,A as z,h as m,m as L,o as s,n as j,S as E}from"./index-BL-rMMGy.js";import{u as $}from"./activityLog-BjSRnBzQ.js";import{u as F,_ as G}from"./usePagination-Bdidk1gz.js";const q={class:"space-y-6"},Y={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},J={class:"flex gap-2"},K={class:"flex items-center gap-2 rounded-lg bg-primary-50 px-3 py-2"},O={class:"text-sm font-semibold text-primary-700"},Q={class:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 p-4"},W={class:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-4"},X={class:"relative"},Z=["value"],ee={class:"rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},te={key:0,class:"flex flex-col items-center justify-center py-16 text-center"},re={key:1,class:"divide-y divide-gray-100 dark:divide-gray-700"},ae={class:"mt-0.5 flex-shrink-0"},se={key:0,class:"flex h-9 w-9 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30"},oe={key:1,class:"flex h-9 w-9 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900/30"},ne={key:2,class:"flex h-9 w-9 items-center justify-center rounded-full bg-red-100 dark:bg-red-900/30"},le={key:3,class:"flex h-9 w-9 items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30"},ie={key:4,class:"flex h-9 w-9 items-center justify-center rounded-full bg-purple-100 dark:bg-purple-900/30"},de={key:5,class:"flex h-9 w-9 items-center justify-center rounded-full bg-teal-100 dark:bg-teal-900/30"},ue={class:"min-w-0 flex-1"},ge={class:"flex flex-wrap items-center gap-2"},ce={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},pe={class:"inline-flex items-center rounded-full bg-gray-100 dark:bg-gray-700 px-2 py-0.5 text-[10px] font-semibold text-gray-600 dark:text-gray-400"},me={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},fe={class:"mt-1 text-xs text-gray-400"},ke=U({__name:"ActivityLogView",setup(xe){const d=$();I();const f=m(""),u=m("all"),g=m(""),c=m("all"),T=L(()=>{const a=new Map;return d.logs.forEach(e=>a.set(e.userId,e.userName)),Array.from(a.entries()).map(([e,r])=>({id:e,name:r}))}),x=L(()=>{let a=[...d.logs];u.value!=="all"&&(a=a.filter(r=>r.action===u.value)),g.value&&(a=a.filter(r=>r.timestamp.slice(0,10)===g.value)),c.value!=="all"&&(a=a.filter(r=>r.userId===c.value));const e=f.value.toLowerCase();return e&&(a=a.filter(r=>r.userName.toLowerCase().includes(e)||r.targetName.toLowerCase().includes(e)||r.details.toLowerCase().includes(e))),a}),l=F(x,30),H=l.paginatedItems;function P(a){return{create:"Tambah",update:"Edit",delete:"Hapus",reset_password:"Reset Password",toggle_active:"Toggle Status",checkin:"Check-in"}[a]||a}function B(a){return{create:"bg-green-100 text-green-800",update:"bg-blue-100 text-blue-800",delete:"bg-red-100 text-red-800",reset_password:"bg-amber-100 text-amber-800",toggle_active:"bg-purple-100 text-purple-800",checkin:"bg-teal-100 text-teal-800"}[a]||"bg-gray-100 text-gray-800"}function S(a){return{admin:"Admin",staff:"Staff",trainer:"Trainer",member:"Member"}[a]||a}function A(a){return{admin:"bg-indigo-100 text-indigo-800",staff:"bg-cyan-100 text-cyan-800",trainer:"bg-orange-100 text-orange-800",member:"bg-gray-100 text-gray-800"}[a]||"bg-gray-100 text-gray-800"}function V(a){return{member:"Member",staff:"Staff",trainer:"Trainer",package:"Paket",membership:"Membership",payment:"Pembayaran",checkin:"Check-in"}[a]||a}function N(){confirm("Yakin hapus semua log? Data yang sudah dihapus tidak bisa dikembalikan.")&&d.clearLogs()}function D(a){const e=new Date(a),v=new Date().getTime()-e.getTime(),y=Math.floor(v/6e4),k=Math.floor(v/36e5),w=Math.floor(v/864e5);return y<1?"Baru saja":y<60?`${y} menit lalu`:k<24?`${k} jam lalu`:w<7?`${w} hari lalu`:E(a)}return(a,e)=>(s(),o("div",q,[t("div",Y,[e[5]||(e[5]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Activity Log"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Riwayat semua aktivitas admin dan staff")],-1)),t("div",J,[t("div",K,[e[4]||(e[4]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),t("span",O,i(n(d).todayLogs.length)+" Hari Ini",1)]),n(d).logs.length>0?(s(),o("button",{key:0,onClick:N,class:"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-sm font-medium text-red-700 hover:bg-red-100 transition-colors"}," Hapus Semua Log ")):b("",!0)])]),t("div",Q,[t("div",W,[t("div",X,[e[6]||(e[6]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>f.value=r),type:"text",placeholder:"Cari aktivitas...",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 py-2 pl-9 pr-3 text-sm text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500"},null,512),[[h,f.value]])]),p(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>u.value=r),class:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500"},[...e[7]||(e[7]=[R('<option value="all">Semua Aksi</option><option value="create">Tambah</option><option value="update">Edit</option><option value="delete">Hapus</option><option value="reset_password">Reset Password</option><option value="toggle_active">Toggle Status</option><option value="checkin">Check-in</option>',7)])],512),[[_,u.value]]),p(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>c.value=r),class:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500"},[e[8]||(e[8]=t("option",{value:"all"},"Semua User",-1)),(s(!0),o(M,null,C(T.value,r=>(s(),o("option",{key:r.id,value:r.id},i(r.name),9,Z))),128))],512),[[_,c.value]]),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>g.value=r),type:"date",class:"rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-900 dark:text-gray-100 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500"},null,512),[[h,g.value]])])]),t("div",ee,[x.value.length===0?(s(),o("div",te,[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-gray-300 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Belum ada aktivitas",-1),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Log aktivitas akan muncul di sini",-1)])])):(s(),o("div",re,[(s(!0),o(M,null,C(n(H),r=>(s(),o("div",{key:r.id,class:"flex items-start gap-4 px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[t("div",ae,[r.action==="create"?(s(),o("div",se,[...e[10]||(e[10]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1)])])):r.action==="update"?(s(),o("div",oe,[...e[11]||(e[11]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])])):r.action==="delete"?(s(),o("div",ne,[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])):r.action==="reset_password"?(s(),o("div",le,[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})],-1)])])):r.action==="toggle_active"?(s(),o("div",ie,[...e[14]||(e[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)])])):r.action==="checkin"?(s(),o("div",de,[...e[15]||(e[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-teal-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])])):b("",!0)]),t("div",ue,[t("div",ge,[t("span",ce,i(r.userName),1),t("span",{class:j(["inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold",A(r.userRole)])},i(S(r.userRole)),3),t("span",{class:j(["inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold",B(r.action)])},i(P(r.action)),3),t("span",pe,i(V(r.targetType)),1)]),t("p",me,i(r.details),1),t("p",fe,i(D(r.timestamp)),1)])]))),128))]))]),x.value.length>0?(s(),z(G,{key:0,"current-page":n(l).currentPage.value,"total-pages":n(l).totalPages.value,"total-items":n(l).totalItems.value,"start-index":n(l).startIndex.value,"end-index":n(l).endIndex.value,"visible-pages":n(l).visiblePages.value,label:"log",onGoToPage:n(l).goToPage,onPrev:n(l).prevPage,onNext:n(l).nextPage},null,8,["current-page","total-pages","total-items","start-index","end-index","visible-pages","onGoToPage","onPrev","onNext"])):b("",!0)]))}});export{ke as default};
