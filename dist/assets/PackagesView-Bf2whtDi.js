import{d as H,c as o,a as t,x as f,g as b,e as h,F as C,l as V,j as P,k as N,h as p,r as T,o as l,n as M,t as d,C as _,f as u,v as c,L as U,w as S}from"./index-CvLdIzOc.js";import{_ as E}from"./ModalDialog.vue_vue_type_script_setup_true_lang-FTlyx4lQ.js";import{u as I,_ as q}from"./usePermissions-C5OhafvI.js";import{u as F}from"./packages-BZayHPwV.js";import{u as z}from"./activityLog-BmGH0MBl.js";const O={class:"space-y-6"},Y={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},G={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},K={class:"bg-gradient-to-r from-primary-600 to-primary-700 px-5 py-4 text-white"},R={class:"flex items-center justify-between"},J={class:"text-lg font-bold"},Q={class:"mt-1 text-2xl font-bold"},W={class:"p-5"},X={class:"text-sm text-gray-600 dark:text-gray-400 mb-3"},Z={class:"space-y-1.5"},ee={key:0,class:"mt-4 flex gap-2 border-t border-gray-100 dark:border-gray-700 pt-4"},te=["onClick"],ae=["onClick"],se={class:"grid grid-cols-2 gap-4"},ne={class:"flex items-center gap-2"},ie={class:"flex justify-end gap-3 pt-2"},oe={type:"submit",class:"btn-primary"},ce=H({__name:"PackagesView",setup(le){const m=F(),k=z(),{canManagePackages:w}=I(),r=p(!1),x=p(!1),y=p(""),v=p(""),i=p(null),n=T({name:"",description:"",durationDays:30,price:0,features:"",isActive:!0});function D(){i.value=null,Object.assign(n,{name:"",description:"",durationDays:30,price:0,features:"",isActive:!0}),r.value=!0}function A(a){i.value=a,Object.assign(n,{name:a.name,description:a.description,durationDays:a.durationDays,price:a.price,features:a.features.join(", "),isActive:a.isActive}),r.value=!0}function B(){const a=n.features.split(",").map(e=>e.trim()).filter(Boolean);if(i.value)m.updatePackage(i.value.id,{...n,features:a}),k.addLog({action:"update",targetType:"package",targetId:i.value.id,targetName:n.name,details:`Mengupdate paket "${n.name}"`});else{const e=m.addPackage({...n,features:a});k.addLog({action:"create",targetType:"package",targetId:e.id,targetName:n.name,details:`Menambahkan paket baru "${n.name}"`})}r.value=!1}function j(a){y.value=`Yakin hapus paket "${a.name}"? Data yang sudah dihapus tidak bisa dikembalikan.`,v.value=a.id,x.value=!0}function L(){const a=m.packages.find(e=>e.id===v.value);k.addLog({action:"delete",targetType:"package",targetId:v.value,targetName:(a==null?void 0:a.name)||"",details:`Menghapus paket "${(a==null?void 0:a.name)||""}"`}),m.deletePackage(v.value)}function $(a){return a===1?"1 Hari":a===7?"1 Minggu":a===30?"1 Bulan":a===90?"3 Bulan":a===365?"1 Tahun":`${a} Hari`}return(a,e)=>(l(),o("div",O,[t("div",Y,[e[10]||(e[10]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Paket GYM"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Kelola paket membership")],-1)),f(w)?(l(),o("button",{key:0,onClick:D,class:"btn-primary"},[...e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v16m8-8H4"})],-1),b(" Tambah Paket ",-1)])])):h("",!0)]),t("div",G,[(l(!0),o(C,null,V(f(m).packages,s=>(l(),o("div",{key:s.id,class:M(["card overflow-hidden transition-shadow hover:shadow-md",!s.isActive&&"opacity-60"])},[t("div",K,[t("div",R,[t("h3",J,d(s.name),1),t("span",{class:M(["rounded-full px-2 py-0.5 text-xs font-medium",s.isActive?"bg-white/20 text-white":"bg-red-500 text-white"])},d(s.isActive?$(s.durationDays):"Nonaktif"),3)]),t("p",Q,d(f(_)(s.price)),1)]),t("div",W,[t("p",X,d(s.description),1),t("ul",Z,[(l(!0),o(C,null,V(s.features,g=>(l(),o("li",{key:g,class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},[e[11]||(e[11]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 text-emerald-500 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"})],-1)),b(" "+d(g),1)]))),128))]),f(w)?(l(),o("div",ee,[t("button",{onClick:g=>A(s),class:"btn-secondary btn-sm flex-1 gap-1"},[...e[12]||(e[12]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),b(" Edit ",-1)])],8,te),t("button",{onClick:g=>j(s),class:"btn-ghost btn-sm text-red-500 hover:text-red-700",title:"Hapus"},[...e[13]||(e[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ae)])):h("",!0)])],2))),128))]),P(E,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=s=>r.value=s),title:i.value?"Edit Paket":"Tambah Paket Baru"},{default:N(()=>[t("form",{onSubmit:S(B,["prevent"]),class:"space-y-4"},[t("div",null,[e[14]||(e[14]=t("label",{class:"label"},"Nama Paket",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>n.name=s),type:"text",class:"input",required:""},null,512),[[c,n.name]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"label"},"Deskripsi",-1)),u(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.description=s),class:"input",rows:"2"},null,512),[[c,n.description]])]),t("div",se,[t("div",null,[e[16]||(e[16]=t("label",{class:"label"},"Durasi (hari)",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>n.durationDays=s),type:"number",class:"input",min:"1",required:""},null,512),[[c,n.durationDays,void 0,{number:!0}]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"label"},"Harga (Rp)",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>n.price=s),type:"number",class:"input",min:"0",required:""},null,512),[[c,n.price,void 0,{number:!0}]])])]),t("div",null,[e[18]||(e[18]=t("label",{class:"label"},"Fitur (pisahkan dengan koma)",-1)),u(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>n.features=s),class:"input",rows:"3",placeholder:"Akses semua alat, Locker, Handuk, dll"},null,512),[[c,n.features]])]),t("div",ne,[u(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>n.isActive=s),id:"pkg-active",class:"rounded border-gray-300 text-primary-600"},null,512),[[U,n.isActive]]),e[19]||(e[19]=t("label",{for:"pkg-active",class:"text-sm text-gray-700 dark:text-gray-300"},"Paket Aktif",-1))]),t("div",ie,[t("button",{type:"button",onClick:e[6]||(e[6]=s=>r.value=!1),class:"btn-secondary"},"Batal"),t("button",oe,d(i.value?"Simpan":"Tambah Paket"),1)])],32)]),_:1},8,["modelValue","title"]),P(q,{modelValue:x.value,"onUpdate:modelValue":e[8]||(e[8]=s=>x.value=s),message:y.value,onConfirm:L},null,8,["modelValue","message"])]))}});export{ce as default};
