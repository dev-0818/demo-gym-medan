import{a0 as B,h as f,a3 as p,m as o,P as N,a4 as x,a2 as J}from"./index-CvLdIzOc.js";const O=B("payments",()=>{const n=f([...p]),c=f(!1);function g(){c.value||(n.value=[...p],c.value=!0)}const s=o(()=>n.value.filter(e=>e.status==="paid")),y=o(()=>n.value.filter(e=>e.status==="pending")),h=o(()=>n.value.filter(e=>e.status==="overdue")),P=o(()=>s.value.reduce((e,t)=>e+t.amount,0)),M=o(()=>{const e=new Date,t=e.getMonth(),a=e.getFullYear();return s.value.filter(u=>{const r=new Date(u.paidAt);return r.getMonth()===t&&r.getFullYear()===a}).reduce((u,r)=>u+r.amount,0)});function b(){const e=["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],t=new Date,a=[],u=[];for(let r=5;r>=0;r--){const d=new Date(t.getFullYear(),t.getMonth()-r,1),m=d.getMonth(),v=d.getFullYear();a.push(`${e[m]} ${v.toString().slice(-2)}`);const S=s.value.filter(l=>{const i=new Date(l.paidAt);return i.getMonth()===m&&i.getFullYear()===v}).reduce((l,i)=>l+i.amount,0);u.push(S)}return{labels:a,values:u}}function w(e){return n.value.find(t=>t.id===e)}function I(e){return n.value.filter(t=>t.memberId===e)}function D(e){return n.value.filter(t=>t.membershipId===e)}function F(e){const t={...e,id:J(),invoiceNumber:x(),createdAt:N()};return n.value.push(t),t}function Y(e,t){const a=n.value.findIndex(u=>u.id===e);a!==-1&&(n.value[a]={...n.value[a],...t})}function A(e){n.value=n.value.filter(t=>t.id!==e)}return{payments:n,paidPayments:s,pendingPayments:y,overduePayments:h,totalRevenue:P,monthlyRevenue:M,init:g,getRevenueByMonth:b,getPaymentById:w,getPaymentsByMember:I,getPaymentsByMembership:D,addPayment:F,updatePayment:Y,deletePayment:A}},{persist:!0});export{O as u};
