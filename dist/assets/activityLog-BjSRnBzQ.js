import{a0 as y,h as p,u as v,P as L,a2 as S,m as a}from"./index-BL-rMMGy.js";const h=y("activityLog",()=>{const r=p([]);function i(e){var s,o,n;const t=v(),d={id:S(),userId:((s=t.currentUser)==null?void 0:s.id)||"",userName:((o=t.currentUser)==null?void 0:o.name)||"System",userRole:((n=t.currentUser)==null?void 0:n.role)||"admin",action:e.action,targetType:e.targetType,targetId:e.targetId,targetName:e.targetName,details:e.details,timestamp:L()};r.value.unshift(d)}const u=a(()=>r.value.slice(0,50)),c=a(()=>{const e=new Date().toISOString().slice(0,10);return r.value.filter(t=>t.timestamp.slice(0,10)===e)});function g(e){return r.value.filter(t=>t.timestamp.slice(0,10)===e)}function l(e){return r.value.filter(t=>t.userId===e)}function m(e){return r.value.filter(t=>t.action===e)}function f(){r.value=[]}return{logs:r,recentLogs:u,todayLogs:c,addLog:i,getLogsByDate:g,getLogsByUser:l,getLogsByAction:m,clearLogs:f}},{persist:!0});export{h as u};
