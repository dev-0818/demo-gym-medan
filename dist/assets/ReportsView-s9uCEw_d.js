import{C as L,p as O,a as V,b as F,B as J,c as U,L as Z,A as q,d as h,P as z}from"./index-BSTmzpSs.js";import{d as Q,s as W,c as d,a as t,F as b,l as u,t as a,x as r,C as c,j as v,e as f,h as $,m as n,o as l,n as S,Q as C,D as R}from"./index-BL-rMMGy.js";import{u as G}from"./packages-86N227Tj.js";import{u as H}from"./memberships-Dm9SGUk7.js";import{u as K}from"./payments-BNnbHALE.js";const X={class:"space-y-6"},Y={class:"card p-1 inline-flex gap-1"},tt=["onClick"],et={key:0,class:"space-y-6"},st={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},at={class:"card p-5 text-center"},rt={class:"text-2xl font-bold text-emerald-600"},ot={class:"card p-5 text-center"},dt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},lt={class:"card p-5 text-center"},it={class:"text-2xl font-bold text-primary-600"},nt={class:"card p-5 text-center"},ct={class:"text-2xl font-bold text-amber-600"},pt={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},gt={class:"card p-5"},yt={class:"h-64"},xt={class:"card p-5"},mt={class:"h-64"},bt={key:1,class:"space-y-6"},ut={class:"card p-5"},vt={class:"h-80"},ft={class:"card overflow-hidden"},_t={class:"overflow-x-auto"},ht={class:"w-full text-sm"},kt={class:"divide-y divide-gray-100 dark:divide-gray-700"},Mt={class:"px-5 py-3 font-mono text-primary-600"},wt={class:"px-5 py-3 font-medium text-gray-900 dark:text-gray-100"},Pt={class:"px-5 py-3 font-semibold"},At={class:"px-5 py-3 text-gray-600 dark:text-gray-400"},St={class:"px-5 py-3 text-gray-500 dark:text-gray-400"},Ct={key:2,class:"space-y-6"},Rt={class:"grid grid-cols-1 gap-4 sm:grid-cols-3"},Tt={class:"card p-5 text-center"},Bt={class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},Dt={class:"card p-5 text-center"},It={class:"text-3xl font-bold text-emerald-600"},Nt={class:"card p-5 text-center"},jt={class:"text-3xl font-bold text-red-600"},Et={class:"card overflow-hidden"},Lt={class:"overflow-x-auto"},Ot={class:"w-full text-sm"},Vt={class:"divide-y divide-gray-100 dark:divide-gray-700"},Ft={class:"px-5 py-3 font-medium text-gray-900 dark:text-gray-100"},Jt={class:"px-5 py-3 text-gray-600 dark:text-gray-400"},Ut={class:"px-5 py-3 text-gray-600 dark:text-gray-400"},Zt={class:"px-5 py-3"},qt={class:"px-5 py-3 text-gray-500 dark:text-gray-400"},zt={key:3,class:"space-y-6"},Qt={class:"card p-5"},Wt={class:"h-72"},$t={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},Gt={class:"flex items-center justify-between mb-3"},Ht={class:"font-semibold text-gray-900 dark:text-gray-100"},Kt={class:"text-lg font-bold text-primary-600"},Xt={class:"space-y-2 text-sm text-gray-600 dark:text-gray-400"},Yt={class:"flex justify-between"},te={class:"font-medium"},ee={class:"flex justify-between"},se={class:"font-medium"},ae={class:"flex justify-between"},re={class:"font-medium text-emerald-600"},pe=Q({__name:"ReportsView",setup(oe){L.register(O,V,F,J,U,Z,q);const _=W(),k=G(),g=H(),y=K(),p=$("overview"),M=n(()=>{const o=y.getRevenueByMonth();return{labels:o.labels,datasets:[{label:"Pendapatan",data:o.values,backgroundColor:"#3b82f6",borderRadius:6,borderSkipped:!1}]}}),T=n(()=>{const o=["cash","transfer","qris","debit"],e=o.map(s=>y.paidPayments.filter(i=>i.method===s).length);return{labels:o.map(C),datasets:[{data:e,backgroundColor:["#22c55e","#3b82f6","#f59e0b","#8b5cf6"],borderWidth:0}]}}),B=n(()=>{const o=k.packages,e=o.map(s=>g.memberships.filter(i=>i.packageId===s.id).length);return{labels:o.map(s=>s.name),datasets:[{label:"Jumlah Member",data:e,backgroundColor:"#3b82f6",borderRadius:6,borderSkipped:!1}]}}),w=n(()=>y.totalRevenue),x=n(()=>_.members.length),P=n(()=>g.activeMemberships.length),D=n(()=>x.value>0?Math.round(w.value/x.value):0),I=n(()=>[...y.payments].sort((o,e)=>new Date(e.paidAt).getTime()-new Date(o.paidAt).getTime()));function N(o){var e;return((e=_.getUserById(o))==null?void 0:e.name)||"-"}const A={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:o=>c(o.raw)}}},scales:{y:{beginAtZero:!0,ticks:{callback:o=>c(o)},grid:{color:"#f3f4f6"}},x:{grid:{display:!1}}}},j={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"#f3f4f6"}},x:{grid:{display:!1}}}},E={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{padding:16,usePointStyle:!0,pointStyle:"circle"}}}};return(o,e)=>(l(),d("div",X,[e[18]||(e[18]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Laporan"),t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Analisis data gym & performa bisnis")],-1)),t("div",Y,[(l(),d(b,null,u([{key:"overview",label:"ðŸ“Š Overview"},{key:"revenue",label:"ðŸ’° Pendapatan"},{key:"members",label:"ðŸ‘¥ Member"},{key:"packages",label:"ðŸ“¦ Paket"}],s=>t("button",{key:s.key,onClick:i=>p.value=s.key,class:S(["rounded-lg px-4 py-2 text-sm font-medium transition-colors",p.value===s.key?"bg-primary-600 text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"])},a(s.label),11,tt)),64))]),p.value==="overview"?(l(),d("div",et,[t("div",st,[t("div",at,[e[0]||(e[0]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Pendapatan",-1)),t("p",rt,a(r(c)(w.value)),1)]),t("div",ot,[e[1]||(e[1]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Member",-1)),t("p",dt,a(x.value),1)]),t("div",lt,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Member Aktif",-1)),t("p",it,a(P.value),1)]),t("div",nt,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Rata-rata / Member",-1)),t("p",ct,a(r(c)(D.value)),1)])]),t("div",pt,[t("div",gt,[e[4]||(e[4]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Pendapatan Bulanan",-1)),t("div",yt,[v(r(h),{data:M.value,options:A},null,8,["data"])])]),t("div",xt,[e[5]||(e[5]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Metode Pembayaran",-1)),t("div",mt,[v(r(z),{data:T.value,options:E},null,8,["data"])])])])])):f("",!0),p.value==="revenue"?(l(),d("div",bt,[t("div",ut,[e[6]||(e[6]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Pendapatan 6 Bulan Terakhir",-1)),t("div",vt,[v(r(h),{data:M.value,options:A},null,8,["data"])])]),t("div",ft,[e[8]||(e[8]=t("div",{class:"border-b border-gray-200 dark:border-gray-700 px-5 py-4"},[t("h3",{class:"text-base font-semibold text-gray-900 dark:text-gray-100"},"Riwayat Semua Transaksi")],-1)),t("div",_t,[t("table",ht,[e[7]||(e[7]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50 text-left"},[t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Invoice"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Member"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Jumlah"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Metode"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Tanggal")])],-1)),t("tbody",kt,[(l(!0),d(b,null,u(I.value,s=>(l(),d("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",Mt,a(s.invoiceNumber),1),t("td",wt,a(N(s.memberId)),1),t("td",Pt,a(r(c)(s.amount)),1),t("td",At,a(r(C)(s.method)),1),t("td",St,a(r(R)(s.paidAt)),1)]))),128))])])])])])):f("",!0),p.value==="members"?(l(),d("div",Ct,[t("div",Rt,[t("div",Tt,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Total Terdaftar",-1)),t("p",Bt,a(x.value),1)]),t("div",Dt,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Membership Aktif",-1)),t("p",It,a(P.value),1)]),t("div",Nt,[e[11]||(e[11]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Membership Expired",-1)),t("p",jt,a(r(g).expiredMemberships.length),1)])]),t("div",Et,[e[13]||(e[13]=t("div",{class:"border-b border-gray-200 dark:border-gray-700 px-5 py-4"},[t("h3",{class:"text-base font-semibold text-gray-900 dark:text-gray-100"},"Daftar Semua Member")],-1)),t("div",Lt,[t("table",Ot,[e[12]||(e[12]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50 text-left"},[t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Nama"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Email"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Telepon"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Status Akun"),t("th",{class:"px-5 py-3 font-semibold text-gray-600 dark:text-gray-400"},"Terdaftar")])],-1)),t("tbody",Vt,[(l(!0),d(b,null,u(r(_).members,s=>(l(),d("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",Ft,a(s.name),1),t("td",Jt,a(s.email),1),t("td",Ut,a(s.phone),1),t("td",Zt,[t("span",{class:S(["rounded-full px-2.5 py-0.5 text-xs font-medium",s.isActive?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"])},a(s.isActive?"Aktif":"Nonaktif"),3)]),t("td",qt,a(r(R)(s.createdAt)),1)]))),128))])])])])])):f("",!0),p.value==="packages"?(l(),d("div",zt,[t("div",Qt,[e[14]||(e[14]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Popularitas Paket",-1)),t("div",Wt,[v(r(h),{data:B.value,options:j},null,8,["data"])])]),t("div",$t,[(l(!0),d(b,null,u(r(k).packages,s=>(l(),d("div",{key:s.id,class:"card p-5"},[t("div",Gt,[t("h3",Ht,a(s.name),1),t("span",Kt,a(r(c)(s.price)),1)]),t("div",Xt,[t("div",Yt,[e[15]||(e[15]=t("span",null,"Durasi",-1)),t("span",te,a(s.durationDays)+" hari",1)]),t("div",ee,[e[16]||(e[16]=t("span",null,"Total Member",-1)),t("span",se,a(r(g).memberships.filter(i=>i.packageId===s.id).length),1)]),t("div",ae,[e[17]||(e[17]=t("span",null,"Revenue",-1)),t("span",re,a(r(c)(r(y).paidPayments.filter(i=>{var m;return((m=r(g).getMembershipById(i.membershipId))==null?void 0:m.packageId)===s.id}).reduce((i,m)=>i+m.amount,0))),1)])])]))),128))])])):f("",!0)]))}});export{pe as default};
